{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    query {\\n      shop {\\n        metafield(namespace: \\\"threekit\\\", key: \\\"token\\\") {\\n          id\\n          value\\n        }\\n      }\\n    }\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport { SkeletonPage, TextContainer, TextField, Button, Modal } from \"@shopify/polaris\";\nimport { Query, Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\n\nfunction SnippetGen(props) {\n  var GET_TK_TOKEN = gql(_templateObject());\n\n  function copyToClip(el) {\n    el.execCommand('copy');\n  }\n\n  var createSnippet = function createSnippet(token) {\n    var newTitle = props.title.replace(/\\s/g, \"\");\n\n    __jsx(Query, {\n      query: GET_TK_TOKEN,\n      onCompleted: function onCompleted(data) {\n        return setValue(createSnippet(!data.shop.metafield ? \"no token\" : data.shop.metafield.value));\n      }\n    }, function (_ref) {\n      var loading = _ref.loading,\n          error = _ref.error,\n          data = _ref.data,\n          refetch = _ref.refetch;\n      if (loading) return null;\n      if (error) return \"Error! \".concat(error);\n      return __jsx(Modal, {\n        open: props.active,\n        onClose: props.handleChange,\n        title: props.title,\n        primaryAction: {\n          content: \"Copy to clipboard\",\n          onAction: props.handleChange\n        }\n      }, __jsx(Modal.Section, null, __jsx(TextContainer, null, __jsx(\"p\", null, \"Copy and paste the HTML to embed a Threekit player with the selected product. Use it on blog posts, home pages, or anywhere HTML input is supported.\"))), __jsx(Modal.Section, null, __jsx(TextContainer, null, __jsx(TextField, {\n        multiline: true,\n        value: value\n      }))));\n    });\n\n    return \"<div id=\\\"tkplayer-\".concat(newTitle, \"\\\" style=\\\"height: 500px; width: 500px;\\\">\\n        <script>\\n                window.threekitPlayer({\\n                authToken: \\\"\").concat(token, \"\\\",\\n                el: document.getElementById(\\\"tkplayer-\").concat(newTitle, \"\\\"),\\n                assetId: '\").concat(props.assetid, \"',\\n                showConfigurator: false,\\n                showAR: \").concat(props.ar, \"\\n              })\\n              .then(async api => {\\n                 window.player = api;\\n                 window.configurator = await api.getConfigurator();\\n          });\\n        </script>\");\n  };\n\n  var _useState = useState(\"\"),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  return __jsx(\"div\", null, __jsx(Query, {\n    query: GET_TK_TOKEN,\n    onCompleted: function onCompleted(data) {\n      return setValue(createSnippet(!data.shop.metafield ? \"no token\" : data.shop.metafield.value));\n    }\n  }, function (_ref2) {\n    var loading = _ref2.loading,\n        error = _ref2.error,\n        data = _ref2.data,\n        refetch = _ref2.refetch;\n    if (loading) return null;\n    if (error) return \"Error! \".concat(error);\n    return __jsx(Modal, {\n      open: props.active,\n      onClose: props.handleChange,\n      title: props.title,\n      primaryAction: {\n        content: \"Close\",\n        onAction: props.handleChange\n      },\n      secondaryActions: [{\n        content: 'Copy to clipboard',\n        onAction: copyToClip(document.getElementById('textbox'))\n      }]\n    }, __jsx(Modal.Section, null, __jsx(TextContainer, null, __jsx(\"p\", null, \"Copy and paste the HTML to embed a Threekit player with the selected product. Use it on blog posts, home pages, or anywhere HTML input is supported.\"))), __jsx(Modal.Section, null, __jsx(TextContainer, null, __jsx(TextField, {\n      multiline: true,\n      value: value,\n      id: \"textBox\"\n    }))));\n  }));\n}\n\nexport default SnippetGen;","map":{"version":3,"sources":["/Users/willthompson/Documents/ThreeKit/Shopify/shopify-tutorial/components/SnippetGen.js"],"names":["React","useState","useEffect","SkeletonPage","TextContainer","TextField","Button","Modal","Query","Mutation","gql","SnippetGen","props","GET_TK_TOKEN","copyToClip","el","execCommand","createSnippet","token","newTitle","title","replace","data","setValue","shop","metafield","value","loading","error","refetch","active","handleChange","content","onAction","assetid","ar","document","getElementById"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  SkeletonPage,\n  TextContainer,\n  TextField,\n  Button,\n  Modal,\n} from \"@shopify/polaris\";\nimport { Query, Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\n\nfunction SnippetGen(props) {\n  const GET_TK_TOKEN = gql`\n    query {\n      shop {\n        metafield(namespace: \"threekit\", key: \"token\") {\n          id\n          value\n        }\n      }\n    }\n  `;\n\n  function copyToClip(el){\n    el.execCommand('copy');\n  }\n\n  const createSnippet = function (token) {\n    let newTitle = props.title.replace(/\\s/g, \"\");\n    <Query\n      query={GET_TK_TOKEN}\n      onCompleted={(data) =>\n        setValue(\n          createSnippet(\n            !data.shop.metafield ? \"no token\" : data.shop.metafield.value\n          )\n        )\n      }\n    >\n      {({ loading, error, data, refetch }) => {\n        if (loading) return null;\n        if (error) return `Error! ${error}`;\n\n        return (\n          <Modal\n            open={props.active}\n            onClose={props.handleChange}\n            title={props.title}\n            primaryAction={{\n              content: \"Copy to clipboard\",\n              onAction: props.handleChange,\n            }}\n          >\n            <Modal.Section>\n              <TextContainer>\n                <p>\n                  Copy and paste the HTML to embed a Threekit player with the\n                  selected product. Use it on blog posts, home pages, or\n                  anywhere HTML input is supported.\n                </p>\n              </TextContainer>\n            </Modal.Section>\n            <Modal.Section>\n              <TextContainer>\n                <TextField multiline value={value} />\n              </TextContainer>\n            </Modal.Section>\n          </Modal>\n        );\n      }}\n    </Query>;\n    return `<div id=\"tkplayer-${newTitle}\" style=\"height: 500px; width: 500px;\">\n        <script>\n                window.threekitPlayer({\n                authToken: \"${token}\",\n                el: document.getElementById(\"tkplayer-${newTitle}\"),\n                assetId: '${props.assetid}',\n                showConfigurator: false,\n                showAR: ${props.ar}\n              })\n              .then(async api => {\n                 window.player = api;\n                 window.configurator = await api.getConfigurator();\n          });\n        </script>`;\n  };\n  const [value, setValue] = useState(\"\");\n\n\n  return (\n    <div>\n      <Query\n        query={GET_TK_TOKEN}\n        onCompleted={(data) =>\n          setValue(\n            createSnippet(\n              !data.shop.metafield ? \"no token\" : data.shop.metafield.value\n            )\n          )\n        }\n      >\n        {({ loading, error, data, refetch }) => {\n          if (loading) return null;\n          if (error) return `Error! ${error}`;\n\n          return (\n            <Modal\n              open={props.active}\n              onClose={props.handleChange}\n              title={props.title}\n              primaryAction={{\n                content: \"Close\",\n                onAction: props.handleChange,\n              }}\n              secondaryActions={[\n                {\n                  content: 'Copy to clipboard',\n                  onAction: copyToClip(document.getElementById('textbox')),\n                },\n              ]}\n            >\n              <Modal.Section>\n                <TextContainer>\n                  <p>\n                    Copy and paste the HTML to embed a Threekit player with the\n                    selected product. Use it on blog posts, home pages, or\n                    anywhere HTML input is supported.\n                  </p>\n                </TextContainer>\n              </Modal.Section>\n              <Modal.Section>\n                <TextContainer>\n                  <TextField multiline value={value} id=\"textBox\" />\n                </TextContainer>\n              </Modal.Section>\n            </Modal>\n          );\n        }}\n      </Query>\n    </div>\n  );\n}\n\nexport default SnippetGen;\n"]},"metadata":{},"sourceType":"module"}