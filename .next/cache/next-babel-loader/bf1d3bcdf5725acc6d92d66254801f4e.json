{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    mutation($input: ProductInput!) {\\n      productUpdate(input: $input) {\\n        product {\\n          metafields(first: 100) {\\n            edges {\\n              node {\\n                id\\n                namespace\\n                key\\n                value\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useCallback } from \"react\";\nimport { Query, Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { Banner, DisplayText, Form, FormLayout, Frame, Layout, Page, PageActions, TextField, Card, Stack, TextStyle, Checkbox, Button } from \"@shopify/polaris\";\n\nfunction ThreekitForm(props) {\n  var _this = this;\n\n  // Declare a new state variable, which we'll call \"count\"\n  var _useState = useState(\"\"),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var _useState2 = useState(false),\n      showToast = _useState2[0],\n      setToast = _useState2[1];\n\n  var UPDATE_TK_ID = gql(_templateObject());\n  var handleChange = useCallback(function (newValue) {\n    return setValue(newValue);\n  }, []);\n  return __jsx(\"div\", null, __jsx(Query, {\n    query: props.query,\n    variables: props.id // skip={!breed}\n\n  }, function (_ref) {\n    var loading = _ref.loading,\n        error = _ref.error,\n        data = _ref.data,\n        refetch = _ref.refetch;\n    if (loading) return null;\n    if (error) return \"Error! \".concat(error);\n    return __jsx(\"div\", null, __jsx(Stack, null, __jsx(Stack.Item, {\n      fill: true\n    }, __jsx(\"h3\", null, __jsx(TextStyle, {\n      variation: \"strong\"\n    }, props.title))), __jsx(Stack.Item, null, __jsx(Mutation, {\n      mutation: UPDATE_TK_ID\n    }, function (handleSubmit, _ref2) {\n      var error = _ref2.error,\n          data = _ref2.data;\n\n      var showError = error && __jsx(Banner, {\n        status: \"critical\"\n      }, error.message);\n\n      var showToast = data && data.productVariantUpdate && __jsx(Toast, {\n        content: \"Sucessfully updated\",\n        onDismiss: function onDismiss() {\n          return console.log(\"UPDATED\");\n        }\n      });\n\n      return __jsx(Frame, null, __jsx(Page, null, __jsx(Layout, null, showToast, __jsx(Layout.Section, null, showError), __jsx(Layout.Section, null, __jsx(DisplayText, {\n        size: \"large\"\n      }, name), __jsx(Form, null, __jsx(Card, {\n        sectioned: true\n      }, __jsx(\"p\", null, __jsx(\"b\", null, \"Current TK ID: \"), getMetaVal(_this.state.variantId)), __jsx(FormLayout, null, __jsx(FormLayout.Group, null, __jsx(TextField, {\n        prefix: \"Associated Product\",\n        value: tkid,\n        onChange: _this.handleChange(\"tkid\"),\n        label: \"Enter your Threekit Asset ID\",\n        type: \"text\"\n      })))), __jsx(PageActions, {\n        primaryAction: [{\n          content: \"Save\",\n          onAction: function onAction() {\n            var productVariableInput;\n\n            if (metaId == \"\") {\n              productVariableInput = {\n                id: _this.state.variantId,\n                metafields: [{\n                  namespace: \"threekit\",\n                  key: \"assetid\",\n                  value: _this.state.tkid,\n                  valueType: \"STRING\"\n                }]\n              };\n            } else {\n              productVariableInput = {\n                id: _this.state.variantId,\n                metafields: [{\n                  namespace: \"threekit\",\n                  key: \"assetid\",\n                  value: _this.state.tkid,\n                  valueType: \"STRING\",\n                  id: metaId\n                }]\n              };\n            }\n\n            handleSubmit({\n              variables: {\n                input: productVariableInput\n              }\n            });\n          }\n        }],\n        secondaryActions: [{\n          content: \"Remove discount\"\n        }]\n      }))))));\n    }))), __jsx(TextField, {\n      value: value,\n      onChange: handleChange // onFocus={getID(!data.product.metafield ? \"No Threekit ID\" : data.product.metafield.value)}\n      ,\n      id: data.product.id,\n      ariaControls: data.product.id,\n      placeholder: !data.product.metafield ? \"No Threekit ID\" : data.product.metafield.value,\n      connectedRight: __jsx(Button, {\n        onClick: function onClick() {\n          return console.log(\"Saved\");\n        }\n      }, \"Save\")\n    }));\n  }));\n}\n\nexport default ThreekitForm;","map":{"version":3,"sources":["/Users/willthompson/Documents/ThreeKit/Shopify/shopify-tutorial/components/ThreekitForm.js"],"names":["React","useState","useCallback","Query","Mutation","gql","Banner","DisplayText","Form","FormLayout","Frame","Layout","Page","PageActions","TextField","Card","Stack","TextStyle","Checkbox","Button","ThreekitForm","props","value","setValue","showToast","setToast","UPDATE_TK_ID","handleChange","newValue","query","id","loading","error","data","refetch","title","handleSubmit","showError","message","productVariantUpdate","console","log","name","getMetaVal","state","variantId","tkid","content","onAction","productVariableInput","metaId","metafields","namespace","key","valueType","variables","input","product","metafield"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,QAA6C,OAA7C;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,cAAhC;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SACEC,MADF,EAEEC,WAFF,EAGEC,IAHF,EAIEC,UAJF,EAKEC,KALF,EAMEC,MANF,EAOEC,IAPF,EAQEC,WARF,EASEC,SATF,EAUEC,IAVF,EAWEC,KAXF,EAYEC,SAZF,EAaEC,QAbF,EAcEC,MAdF,QAeO,kBAfP;;AAiBA,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAAA;;AAC3B;AAD2B,kBAEDpB,QAAQ,CAAC,EAAD,CAFP;AAAA,MAEpBqB,KAFoB;AAAA,MAEbC,QAFa;;AAAA,mBAGGtB,QAAQ,CAAC,KAAD,CAHX;AAAA,MAGpBuB,SAHoB;AAAA,MAGTC,QAHS;;AAM3B,MAAMC,YAAY,GAAGrB,GAAH,mBAAlB;AAmBA,MAAMsB,YAAY,GAAGzB,WAAW,CAAC,UAAA0B,QAAQ;AAAA,WAAIL,QAAQ,CAACK,QAAD,CAAZ;AAAA,GAAT,EAAiC,EAAjC,CAAhC;AACA,SACE,mBACE,MAAC,KAAD;AACE,IAAA,KAAK,EAAEP,KAAK,CAACQ,KADf;AAEE,IAAA,SAAS,EAAER,KAAK,CAACS,EAFnB,CAGE;;AAHF,KAKG,gBAAuC;AAAA,QAApCC,OAAoC,QAApCA,OAAoC;AAAA,QAA3BC,KAA2B,QAA3BA,KAA2B;AAAA,QAApBC,IAAoB,QAApBA,IAAoB;AAAA,QAAdC,OAAc,QAAdA,OAAc;AACtC,QAAIH,OAAJ,EAAa,OAAO,IAAP;AACb,QAAIC,KAAJ,EAAW,wBAAiBA,KAAjB;AAEX,WACE,mBAIE,MAAC,KAAD,QACE,MAAC,KAAD,CAAO,IAAP;AAAY,MAAA,IAAI;AAAhB,OACE,kBACE,MAAC,SAAD;AAAW,MAAA,SAAS,EAAC;AAArB,OAA+BX,KAAK,CAACc,KAArC,CADF,CADF,CADF,EAME,MAAC,KAAD,CAAO,IAAP,QACE,MAAC,QAAD;AAAU,MAAA,QAAQ,EAAET;AAApB,OACG,UAACU,YAAD,SAAmC;AAAA,UAAlBJ,KAAkB,SAAlBA,KAAkB;AAAA,UAAXC,IAAW,SAAXA,IAAW;;AAClC,UAAMI,SAAS,GAAGL,KAAK,IACrB,MAAC,MAAD;AAAQ,QAAA,MAAM,EAAC;AAAf,SAA2BA,KAAK,CAACM,OAAjC,CADF;;AAGA,UAAMd,SAAS,GAAGS,IAAI,IAAIA,IAAI,CAACM,oBAAb,IAChB,MAAC,KAAD;AACE,QAAA,OAAO,EAAC,qBADV;AAEE,QAAA,SAAS,EAAE;AAAA,iBAAMC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAN;AAAA;AAFb,QADF;;AAOA,aACE,MAAC,KAAD,QACE,MAAC,IAAD,QACE,MAAC,MAAD,QACGjB,SADH,EAEE,MAAC,MAAD,CAAQ,OAAR,QAAiBa,SAAjB,CAFF,EAGE,MAAC,MAAD,CAAQ,OAAR,QACE,MAAC,WAAD;AAAa,QAAA,IAAI,EAAC;AAAlB,SAA2BK,IAA3B,CADF,EAEE,MAAC,IAAD,QACE,MAAC,IAAD;AAAM,QAAA,SAAS;AAAf,SACE,iBACE,mCADF,EAEGC,UAAU,CAAC,KAAI,CAACC,KAAL,CAAWC,SAAZ,CAFb,CADF,EAKE,MAAC,UAAD,QACE,MAAC,UAAD,CAAY,KAAZ,QACE,MAAC,SAAD;AACE,QAAA,MAAM,EAAC,oBADT;AAEE,QAAA,KAAK,EAAEC,IAFT;AAGE,QAAA,QAAQ,EAAE,KAAI,CAACnB,YAAL,CAAkB,MAAlB,CAHZ;AAIE,QAAA,KAAK,EAAC,8BAJR;AAKE,QAAA,IAAI,EAAC;AALP,QADF,CADF,CALF,CADF,EAkBE,MAAC,WAAD;AACE,QAAA,aAAa,EAAE,CACb;AACEoB,UAAAA,OAAO,EAAE,MADX;AAEEC,UAAAA,QAAQ,EAAE,oBAAM;AACd,gBAAIC,oBAAJ;;AACA,gBAAIC,MAAM,IAAI,EAAd,EAAkB;AAChBD,cAAAA,oBAAoB,GAAG;AACrBnB,gBAAAA,EAAE,EAAE,KAAI,CAACc,KAAL,CAAWC,SADM;AAErBM,gBAAAA,UAAU,EAAE,CACV;AACEC,kBAAAA,SAAS,EAAE,UADb;AAEEC,kBAAAA,GAAG,EAAE,SAFP;AAGE/B,kBAAAA,KAAK,EAAE,KAAI,CAACsB,KAAL,CAAWE,IAHpB;AAIEQ,kBAAAA,SAAS,EAAE;AAJb,iBADU;AAFS,eAAvB;AAWD,aAZD,MAYO;AACLL,cAAAA,oBAAoB,GAAG;AACrBnB,gBAAAA,EAAE,EAAE,KAAI,CAACc,KAAL,CAAWC,SADM;AAErBM,gBAAAA,UAAU,EAAE,CACV;AACEC,kBAAAA,SAAS,EAAE,UADb;AAEEC,kBAAAA,GAAG,EAAE,SAFP;AAGE/B,kBAAAA,KAAK,EAAE,KAAI,CAACsB,KAAL,CAAWE,IAHpB;AAIEQ,kBAAAA,SAAS,EAAE,QAJb;AAKExB,kBAAAA,EAAE,EAAEoB;AALN,iBADU;AAFS,eAAvB;AAYD;;AAEDd,YAAAA,YAAY,CAAC;AACXmB,cAAAA,SAAS,EAAE;AACTC,gBAAAA,KAAK,EAAEP;AADE;AADA,aAAD,CAAZ;AAKD;AApCH,SADa,CADjB;AAyCE,QAAA,gBAAgB,EAAE,CAChB;AACEF,UAAAA,OAAO,EAAE;AADX,SADgB;AAzCpB,QAlBF,CAFF,CAHF,CADF,CADF,CADF;AA+ED,KA3FH,CADF,CANF,CAJF,EA4GE,MAAC,SAAD;AACE,MAAA,KAAK,EAAEzB,KADT;AAEE,MAAA,QAAQ,EAAEK,YAFZ,CAGE;AAHF;AAIE,MAAA,EAAE,EAAEM,IAAI,CAACwB,OAAL,CAAa3B,EAJnB;AAKE,MAAA,YAAY,EAAEG,IAAI,CAACwB,OAAL,CAAa3B,EAL7B;AAME,MAAA,WAAW,EACT,CAACG,IAAI,CAACwB,OAAL,CAAaC,SAAd,GACI,gBADJ,GAEIzB,IAAI,CAACwB,OAAL,CAAaC,SAAb,CAAuBpC,KAT/B;AAWE,MAAA,cAAc,EACZ,MAAC,MAAD;AAAQ,QAAA,OAAO,EAAE;AAAA,iBAAMkB,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAN;AAAA;AAAjB;AAZJ,MA5GF,CADF;AAiID,GA1IH,CADF,CADF;AAgJD;;AAED,eAAerB,YAAf","sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport { Query, Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport {\n  Banner,\n  DisplayText,\n  Form,\n  FormLayout,\n  Frame,\n  Layout,\n  Page,\n  PageActions,\n  TextField,\n  Card,\n  Stack,\n  TextStyle,\n  Checkbox,\n  Button\n} from \"@shopify/polaris\";\n\nfunction ThreekitForm(props) {\n  // Declare a new state variable, which we'll call \"count\"\n  const [value, setValue] = useState(\"\");\n  const [showToast, setToast] = useState(false)\n\n\n  const UPDATE_TK_ID = gql`\n    mutation($input: ProductInput!) {\n      productUpdate(input: $input) {\n        product {\n          metafields(first: 100) {\n            edges {\n              node {\n                id\n                namespace\n                key\n                value\n              }\n            }\n          }\n        }\n      }\n    }\n  `;\n\n  const handleChange = useCallback(newValue => setValue(newValue), []);\n  return (\n    <div>\n      <Query\n        query={props.query}\n        variables={props.id}\n        // skip={!breed}\n      >\n        {({ loading, error, data, refetch }) => {\n          if (loading) return null;\n          if (error) return `Error! ${error}`;\n\n          return (\n            <div>\n              {/* <Card title={props.title}> */}\n              {/* {console.log(data)} */}\n\n              <Stack>\n                <Stack.Item fill>\n                  <h3>\n                    <TextStyle variation=\"strong\">{props.title}</TextStyle>\n                  </h3>\n                </Stack.Item>\n                <Stack.Item>\n                  <Mutation mutation={UPDATE_TK_ID}>\n                    {(handleSubmit, { error, data }) => {\n                      const showError = error && (\n                        <Banner status=\"critical\">{error.message}</Banner>\n                      );\n                      const showToast = data && data.productVariantUpdate && (\n                        <Toast\n                          content=\"Sucessfully updated\"\n                          onDismiss={() => console.log(\"UPDATED\")}\n                        />\n                      );\n\n                      return (\n                        <Frame>\n                          <Page>\n                            <Layout>\n                              {showToast}\n                              <Layout.Section>{showError}</Layout.Section>\n                              <Layout.Section>\n                                <DisplayText size=\"large\">{name}</DisplayText>\n                                <Form>\n                                  <Card sectioned>\n                                    <p>\n                                      <b>Current TK ID: </b>\n                                      {getMetaVal(this.state.variantId)}\n                                    </p>\n                                    <FormLayout>\n                                      <FormLayout.Group>\n                                        <TextField\n                                          prefix=\"Associated Product\"\n                                          value={tkid}\n                                          onChange={this.handleChange(\"tkid\")}\n                                          label=\"Enter your Threekit Asset ID\"\n                                          type=\"text\"\n                                        />\n                                      </FormLayout.Group>\n                                    </FormLayout>\n                                  </Card>\n                                  <PageActions\n                                    primaryAction={[\n                                      {\n                                        content: \"Save\",\n                                        onAction: () => {\n                                          let productVariableInput;\n                                          if (metaId == \"\") {\n                                            productVariableInput = {\n                                              id: this.state.variantId,\n                                              metafields: [\n                                                {\n                                                  namespace: \"threekit\",\n                                                  key: \"assetid\",\n                                                  value: this.state.tkid,\n                                                  valueType: \"STRING\"\n                                                }\n                                              ]\n                                            };\n                                          } else {\n                                            productVariableInput = {\n                                              id: this.state.variantId,\n                                              metafields: [\n                                                {\n                                                  namespace: \"threekit\",\n                                                  key: \"assetid\",\n                                                  value: this.state.tkid,\n                                                  valueType: \"STRING\",\n                                                  id: metaId\n                                                }\n                                              ]\n                                            };\n                                          }\n\n                                          handleSubmit({\n                                            variables: {\n                                              input: productVariableInput\n                                            }\n                                          });\n                                        }\n                                      }\n                                    ]}\n                                    secondaryActions={[\n                                      {\n                                        content: \"Remove discount\"\n                                      }\n                                    ]}\n                                  />\n                                </Form>\n                              </Layout.Section>\n                            </Layout>\n                          </Page>\n                        </Frame>\n                      );\n                    }}\n                  </Mutation>\n                </Stack.Item>\n              </Stack>\n              {/* Catch the error for no IDS */}\n\n              <TextField\n                value={value}\n                onChange={handleChange}\n                // onFocus={getID(!data.product.metafield ? \"No Threekit ID\" : data.product.metafield.value)}\n                id={data.product.id}\n                ariaControls={data.product.id}\n                placeholder={\n                  !data.product.metafield\n                    ? \"No Threekit ID\"\n                    : data.product.metafield.value\n                }\n                connectedRight={\n                  <Button onClick={() => console.log(\"Saved\")}>Save</Button>\n                }\n              ></TextField>\n\n              {/* <button onClick={() => refetch()}>Refetch!</button> */}\n              {/* </Card> */}\n            </div>\n          );\n        }}\n      </Query>\n    </div>\n  );\n}\n\nexport default ThreekitForm;\n"]},"metadata":{},"sourceType":"module"}